#!/usr/bin/env sh

# Exit on error
set -e

echo "ğŸš€ Starting FlexLink Configurator Development Environment..."

# Compile Tailwind CSS
echo "ğŸ“¦ Compiling Tailwind CSS..."
npx tailwindcss -c tailwind.config.js -i ./app/assets/stylesheets/application.css -o ./app/assets/builds/application.css --minify

# Copy to public assets
echo "ğŸ“ Copying CSS to public assets..."
cp ./app/assets/builds/application.css ./public/assets/application.css

# Start the development environment with Guard
echo "ğŸ³ Starting Docker containers with auto-reload..."
echo "ğŸ“± Auto-reload will be available at http://localhost:3000"
echo "ğŸ”„ LiveReload server running on port 35729"
echo ""
echo "ğŸ’¡ To use auto-reload:"
echo "   1. Open http://localhost:3000 in your browser"
echo "   2. Install the LiveReload browser extension (if not already installed)"
echo "   3. Enable LiveReload for localhost:3000"
echo "   4. Any changes to views, CSS, or JS will automatically reload the browser"
echo ""

docker-compose -f docker-compose.dev.yml up --build
