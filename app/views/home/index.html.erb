<!DOCTYPE html>
<html>
<head>
  <title>FlexLink Configurator</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>
</head>

<body>
<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>üéØ FlexLink Configuration Dashboard</h1>
    <p class="welcome-text">Welcome back, <%= current_user&.name || 'User' %>! Ready to configure your next conveyor system?</p>
  </div>

  <div class="dashboard-stats">
    <div class="stat-card">
      <div class="stat-icon">üìä</div>
      <div class="stat-content">
        <h3><%= @recent_configurations.count %></h3>
        <p>Total Configurations</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">‚úÖ</div>
      <div class="stat-content">
        <h3><%= @completed_configurations.count %></h3>
        <p>Completed</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">üîÑ</div>
      <div class="stat-content">
        <h3><%= @active_configurations.count %></h3>
        <p>In Progress</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">üí∞</div>
      <div class="stat-content">
        <h3>$<%= number_with_delimiter(@total_value || 0) %></h3>
        <p>Total Value</p>
      </div>
    </div>
  </div>

  <div class="dashboard-actions">
    <div class="action-card primary">
      <div class="action-content">
        <h2>üöÄ Start New Configuration</h2>
        <p>Begin the guided wizard to create a new conveyor system configuration</p>
        <%= link_to "Start Wizard", wizard_step_path(1), class: "btn btn-primary btn-large" %>
      </div>
      <div class="action-icon">‚öôÔ∏è</div>
    </div>
    
    <div class="action-card">
      <div class="action-content">
        <h3>üìã Recent Configurations</h3>
        <% if @recent_configurations.any? %>
          <div class="recent-list">
            <% @recent_configurations.limit(3).each do |config| %>
              <div class="recent-item">
                <div class="item-info">
                  <h4><%= config.name %></h4>
                  <p><%= config.system_type&.humanize %> ‚Ä¢ <%= config.status.humanize %></p>
                </div>
                <%= link_to "View", configuration_path(config), class: "btn btn-small" %>
              </div>
            <% end %>
          </div>
        <% else %>
          <p class="empty-state">No configurations yet. Start your first one!</p>
        <% end %>
      </div>
    </div>
  </div>

  <div class="dashboard-sections">
    <div class="section-card">
      <h3>üîß System Types Available</h3>
      <div class="system-types-grid">
        <% @system_specifications&.each do |category, types| %>
          <div class="system-category">
            <h4><%= category.humanize %></h4>
            <div class="type-list">
              <% types.first(3).each do |type| %>
                <span class="type-tag"><%= type.humanize %></span>
              <% end %>
              <% if types.length > 3 %>
                <span class="type-tag more">+<%= types.length - 3 %> more</span>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <div class="section-card">
      <h3>üì¶ Component Categories</h3>
      <div class="component-types-grid">
        <% @component_types&.first(6)&.each do |component_type| %>
          <div class="component-type">
            <span class="component-icon">üì¶</span>
            <span class="component-name"><%= component_type_display_name(component_type) %></span>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<style>
.dashboard-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 20px;
}

.dashboard-header {
  text-align: center;
  margin-bottom: 40px;
}

.dashboard-header h1 {
  color: #2c3e50;
  margin-bottom: 10px;
  font-size: 32px;
}

.welcome-text {
  color: #7f8c8d;
  font-size: 18px;
}

.dashboard-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-bottom: 40px;
}

.stat-card {
  background: white;
  border-radius: 12px;
  padding: 25px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  border: 1px solid #ecf0f1;
  display: flex;
  align-items: center;
  gap: 15px;
}

.stat-icon {
  font-size: 32px;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #667eea, #764ba2);
  border-radius: 12px;
  color: white;
}

.stat-content h3 {
  margin: 0;
  font-size: 28px;
  color: #2c3e50;
  font-weight: 600;
}

.stat-content p {
  margin: 5px 0 0 0;
  color: #7f8c8d;
  font-size: 14px;
}

.dashboard-actions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
  margin-bottom: 40px;
}

.action-card {
  background: white;
  border-radius: 12px;
  padding: 30px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  border: 1px solid #ecf0f1;
  position: relative;
  overflow: hidden;
}

.action-card.primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.action-card.primary h2,
.action-card.primary p {
  color: white;
}

.action-content h2 {
  margin: 0 0 15px 0;
  font-size: 24px;
  color: #2c3e50;
}

.action-content h3 {
  margin: 0 0 15px 0;
  font-size: 20px;
  color: #2c3e50;
}

.action-content p {
  color: #7f8c8d;
  margin-bottom: 20px;
  line-height: 1.5;
}

.action-icon {
  position: absolute;
  top: 20px;
  right: 20px;
  font-size: 48px;
  opacity: 0.1;
}

.btn {
  padding: 12px 24px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  display: inline-block;
}

.btn-primary {
  background: linear-gradient(135deg, #3498db, #2980b9);
  color: white;
}

.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
}

.btn-large {
  padding: 16px 32px;
  font-size: 18px;
}

.btn-small {
  padding: 8px 16px;
  font-size: 14px;
  background: #ecf0f1;
  color: #7f8c8d;
}

.btn-small:hover {
  background: #d5dbdb;
  color: #2c3e50;
}

.recent-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.recent-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 8px;
}

.item-info h4 {
  margin: 0 0 5px 0;
  font-size: 16px;
  color: #2c3e50;
}

.item-info p {
  margin: 0;
  font-size: 14px;
  color: #7f8c8d;
}

.empty-state {
  color: #7f8c8d;
  font-style: italic;
  text-align: center;
  padding: 20px;
}

.dashboard-sections {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
}

.section-card {
  background: white;
  border-radius: 12px;
  padding: 25px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  border: 1px solid #ecf0f1;
}

.section-card h3 {
  margin: 0 0 20px 0;
  color: #2c3e50;
  font-size: 20px;
}

.system-types-grid,
.component-types-grid {
  display: grid;
  gap: 20px;
}

.system-category h4 {
  margin: 0 0 10px 0;
  color: #2c3e50;
  font-size: 16px;
}

.type-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.type-tag {
  background: #ecf0f1;
  color: #7f8c8d;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 500;
}

.type-tag.more {
  background: #3498db;
  color: white;
}

.component-types-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 15px;
}

.component-type {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 8px;
  transition: all 0.3s ease;
}

.component-type:hover {
  background: #e9ecef;
  transform: translateY(-1px);
}

.component-icon {
  font-size: 20px;
}

.component-name {
  font-size: 14px;
  color: #2c3e50;
  font-weight: 500;
}

@media (max-width: 768px) {
  .dashboard-actions,
  .dashboard-sections {
    grid-template-columns: 1fr;
  }
  
  .dashboard-stats {
    grid-template-columns: repeat(2, 1fr);
  }
}
</style> 